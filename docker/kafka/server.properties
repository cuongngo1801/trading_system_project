# Kafka KRaft Configuration for Trading System
# This configuration runs Kafka in KRaft mode without Zookeeper

############################# Server Basics #############################
# The role of this server. Can be 'broker', 'controller', or 'broker,controller'
process.roles=broker,controller

# The node id associated with this instance's roles
node.id=1

# The connect string for the controller quorum
controller.quorum.voters=1@localhost:29093

############################# Socket Server Settings #############################
# Listener configuration
listeners=PLAINTEXT://0.0.0.0:29092,CONTROLLER://0.0.0.0:29093,PLAINTEXT_HOST://0.0.0.0:9092
inter.broker.listener.name=PLAINTEXT
advertised.listeners=PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092
controller.listener.names=CONTROLLER

# Listener security protocol mapping
listener.security.protocol.map=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT

############################# Log Basics #############################
# A comma separated list of directories under which to store log files
log.dirs=/tmp/kraft-combined-logs

# The default number of log partitions per topic
num.partitions=3

# The default replication factor for automatically created topics
default.replication.factor=1

# The minimum age of a log file to be eligible for deletion due to age
log.retention.hours=168

# The maximum size of a log segment file
log.segment.bytes=1073741824

# The interval at which log segments are checked to see if they can be deleted
log.retention.check.interval.ms=300000

############################# Internal Topic Settings #############################
# The replication factor for the group metadata internal topics
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1

############################# Group Coordinator Settings #############################
# The following configuration specifies the time, in milliseconds, that the coordinator will wait for each member to rejoin when rebalancing the group
group.initial.rebalance.delay.ms=0

############################# Auto Topic Creation #############################
# Enable auto creation of topic on the server
auto.create.topics.enable=true

# Default number of partitions for auto-created topics
num.partitions=3

############################# Performance Tuning #############################
# Number of threads doing disk I/O
num.io.threads=8

# Number of threads handling network requests
num.network.threads=3

# The send buffer (SO_SNDBUF) used by the socket server
socket.send.buffer.bytes=102400

# The receive buffer (SO_RCVBUF) used by the socket server
socket.receive.buffer.bytes=102400

# The maximum size of a request that the socket server will accept
socket.request.max.bytes=104857600

############################# Controller Settings #############################
# Controller configurations for KRaft mode
controller.quorum.election.timeout.ms=1000
controller.quorum.fetch.timeout.ms=2000
